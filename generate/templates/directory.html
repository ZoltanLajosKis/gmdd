<%
package templates

import (
    "os"
    "path"
)

func Directory(w io.Writer, current string, parent string, list []os.FileInfo, totalSize int64) {
%>

<!DOCTYPE html>
<html>
<title><%= current %></title>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="/__gmdd__/github-markdown.min.css" type="text/css" media="all">
<link rel="stylesheet" href="/__gmdd__/gmdd.css" type="text/css" media="all">
</head>
<body>
<div class="markdown-body">
  <table id="directory">
    <thead>
      <tr>
        <th class="name">Name</th>
        <th class="size">Size</th>
        <th class="modtime">Modified</th>
      </tr>
    </thead>
    <tbody>
    <% if parent != "" { %>
      <tr>
        <td class="name"><a href="<%= parent %>">..</a></td>
        <td class="size">&mdash;</td>
        <td class="modtime"></td>
      </tr>
    <% } %>
    <% for _, info := range list { %>
      <tr>
        <td class="name">
          <a href="<%= path.Join(current, info.Name()) %>"><%= info.Name() %></a>
        </td>
        <td class="size">
        <% if info.IsDir() { %>
          &mdash;
        <% } else { %>
          <%== info.Size() %>
        <% } %>
        </td>
        <td class="modtime"><%== info.ModTime().Format("2006-01-02 15:04:05") %></td>
      </tr>
    <% } %>
    </tbody>
    <tfoot>
      <tr>
        <td class="totalsize" colspan="3">Total size: <%== totalSize %></td>
      </tr>
    </tfoot>
  </tbody>
</div>
</body>
</html>

<% } %>

